<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Portfolio{% endblock %}</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K8VMCCKH02"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-K8VMCCKH02');
    </script>    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav>
        <div class="navbar-container">
            <a href="/" class="nav-brand">
                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Portfolio Logo by Konstantinos Tsaousidis">
            </a>
            <button class="navbar-toggle" aria-label="Toggle navigation">
                <span class="toggle-icon"></span>
            </button>
            <ul class="nav-links">
                <li><a href="/projects">Projects</a></li>
                <li><a href="/technologies">Technologies</a></li>
                <li><a href="/feedback">Feedback</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="container py-4">
        {% block content %}{% endblock %}
    </main>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const toggle = document.querySelector('.navbar-toggle');
            const nav = document.querySelector('.nav-links');
            
            toggle.addEventListener('click', function() {
                toggle.classList.toggle('active');
                nav.classList.toggle('active');
            });

            // Close menu when clicking on a link
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    toggle.classList.remove('active');
                    nav.classList.remove('active');
                });
            });

            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>

    <!-- Chat Widget -->
    <div class="chat-container collapsed">
        <div class="chat-header">
            <span>Tsaousidis Interactive FAQ</span>
        </div>
        <div class="chat-messages">
            <!-- Welcome message -->
            <div class="message bot">
                Hi there! ðŸ‘‹ How can I help you today?
            </div>
        </div>
        <div class="chat-input">
            <input type="text" placeholder="Type your message..." aria-label="Chat message">
            <button class="send-button">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
    
    <!-- Mobile Chat Icon -->
    <div class="chat-icon">
        <i class="fas fa-comment-dots"></i>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTop" class="scroll-to-top" aria-label="Scroll to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Initialize chat functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatContainer = document.querySelector('.chat-container');
            const chatIcon = document.querySelector('.chat-icon');
            const chatHeader = document.querySelector('.chat-header');
            const chatInput = document.querySelector('.chat-input input');
            const chatSend = document.querySelector('.send-button');
            const chatMessages = document.querySelector('.chat-messages');

            // Toggle chat on mobile
            chatIcon?.addEventListener('click', function() {
                chatContainer.classList.remove('collapsed');
                chatContainer.classList.add('visible');
                chatInput.focus();
            });

            // Toggle chat on desktop
            chatHeader?.addEventListener('click', function() {
                chatContainer.classList.toggle('collapsed');
                if (!chatContainer.classList.contains('collapsed')) {
                    chatInput.focus();
                }
            });

            // Send message function
            function sendMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    // Create and add user message
                    const userMsg = document.createElement('div');
                    userMsg.className = 'message user';
                    userMsg.textContent = message;
                    chatMessages.appendChild(userMsg);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Clear input
                    chatInput.value = '';
                    
                    // Auto response
                    setTimeout(() => {
                        const responses = [
                            "Thanks for your message! I'll get back to you soon.",
                            "I appreciate your message. I'll respond as soon as possible.",
                            "Thanks for reaching out! I'll check this and get back to you.",
                            "Got your message! I'll respond shortly.",
                            "Thanks for contacting me! I'll review this and respond soon."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        
                        const botMsg = document.createElement('div');
                        botMsg.className = 'message bot';
                        botMsg.textContent = randomResponse;
                        chatMessages.appendChild(botMsg);
                        
                        // Scroll to bottom again after bot response
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000);
                }
            }

            // Send on button click
            chatSend?.addEventListener('click', sendMessage);

            // Send on Enter key
            chatInput?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault(); // Prevent default to avoid any form submission
                    sendMessage();
                }
            });

            // Close chat on mobile when clicking outside
            document.addEventListener('click', function(e) {
                if (window.innerWidth <= 768) {
                    if (!chatContainer.contains(e.target) && !chatIcon.contains(e.target)) {
                        chatContainer.classList.remove('visible');
                    }
                }
            });

            // Prevent chat toggle when clicking input or messages
            chatInput?.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            chatMessages?.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
    </script>

    <!-- Scroll to Top functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopBtn = document.getElementById('scrollToTop');
            
            // Show/hide button based on scroll position
            window.addEventListener('scroll', function() {
                if (window.scrollY > 200) {
                    scrollToTopBtn.classList.add('visible');
                } else {
                    scrollToTopBtn.classList.remove('visible');
                }
            });

            // Scroll to top when clicked
            scrollToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
    </script>

    <!-- Footer -->
    <footer class="footer py-3 mt-auto">
        <div class="container text-center">
            <p>Â© 2025 Tsaousidis. All rights reserved.</p>
        </div>
    </footer>
</body>
</html> 